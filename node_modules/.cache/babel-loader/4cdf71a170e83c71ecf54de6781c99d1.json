{"ast":null,"code":"var _jsxFileName = \"/Users/k19053kk/charirion/src/pages/RegisterPage.tsx\",\n    _s = $RefreshSig$();\n\nimport { useContext, useState } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst RegisterPage = () => {\n  _s();\n\n  const [alert, setAlert] = useState(false);\n  const [alertMessage, setAlertMessage] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const auth = getAuth();\n  const navigate = useNavigate();\n  const context = useContext(AuthContext);\n\n  const handleChangeName = event => {\n    setName(event.target.value);\n  };\n\n  const handleChangeEmail = event => {\n    setEmail(event.target.value);\n  };\n\n  const handleChangePassword = event => {\n    setPassword(event.target.value);\n  };\n\n  const handleRegisterButton = () => {\n    createUserWithEmailAndPassword(auth, email, password).then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n      console.log(user.uid);\n\n      try {\n        setDoc(doc(db, \"users\", user.uid), {\n          name: name,\n          role: 0 // 0: user, 1: admin\n\n        }).then(result => {\n          console.log(result);\n        }).catch(err => {\n          console.log(err);\n        });\n      } catch (e) {\n        console.error(\"Error adding document: \", e);\n      }\n\n      navigate(\"/login\");\n    }).catch(error => {\n      setAlert(true);\n\n      if (error.code === \"auth/email-already-in-use\") {\n        setAlertMessage(\"メールアドレスに不備があります\");\n      }\n\n      if (error.code === \"auth/invalid-password\") {\n        setAlertMessage(\"パスワードは６文字以上でなくてはいけません\");\n      }\n\n      if (email === \"\") {\n        setAlertMessage(\"Emailが空白です\");\n      }\n\n      if (name === \"\") {\n        setAlertMessage(\"Your nameが空白です\");\n      }\n\n      if (password === \"\") {\n        setAlertMessage(\"passwordが空白です\");\n      } else {\n        setAlertMessage(\"入力に不備があります\");\n      }\n\n      console.log(error.code); // const errorCode = error.code;\n      // const errorMessage = error.message;\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: context.isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u65B0\\u898F\\u767B\\u9332\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), alert && /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: alertMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicName\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Your name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"text\",\n            placeholder: \"Enter name\",\n            value: name,\n            onChange: handleChangeName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicEmail\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Email address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"email\",\n            placeholder: \"Enter email\",\n            value: email,\n            onChange: handleChangeEmail\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"formBasicPassword\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: handleChangePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"button\",\n          onClick: handleRegisterButton,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            children: \"\\u30ED\\u30B0\\u30A4\\u30F3\\u306F\\u3053\\u3061\\u3089\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false);\n};\n\n_s(RegisterPage, \"UbabvUutX/Du6cAwuXhptyetFTg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = RegisterPage;\nexport default RegisterPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegisterPage\");","map":{"version":3,"sources":["/Users/k19053kk/charirion/src/pages/RegisterPage.tsx"],"names":["useContext","useState","Form","Button","Alert","getAuth","createUserWithEmailAndPassword","Link","Navigate","useNavigate","doc","setDoc","db","AuthContext","RegisterPage","alert","setAlert","alertMessage","setAlertMessage","name","setName","email","setEmail","password","setPassword","auth","navigate","context","handleChangeName","event","target","value","handleChangeEmail","handleChangePassword","handleRegisterButton","then","userCredential","user","console","log","uid","role","result","catch","err","e","error","code","isLoggedIn"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,QAArB,QAAqC,OAArC;AACA,SAASC,IAAT,EAAeC,MAAf,EAAuBC,KAAvB,QAAoC,iBAApC;AACA,SAASC,OAAT,EAAkBC,8BAAlB,QAAwD,eAAxD;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,WAAzB,QAA4C,kBAA5C;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,oBAA5B;AACA,SAASC,EAAT,QAAmB,aAAnB;AACA,SAASC,WAAT,QAA4B,wBAA5B;;;;AAEA,MAAMC,YAAY,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACgB,YAAD,EAAeC,eAAf,IAAkCjB,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACkB,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAAS,EAAT,CAAhC;AACA,QAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAS,EAAT,CAAlC;AACA,QAAM,CAACsB,QAAD,EAAWC,WAAX,IAA0BvB,QAAQ,CAAS,EAAT,CAAxC;AACA,QAAMwB,IAAI,GAAGpB,OAAO,EAApB;AACA,QAAMqB,QAAQ,GAAGjB,WAAW,EAA5B;AACA,QAAMkB,OAAO,GAAG3B,UAAU,CAACa,WAAD,CAA1B;;AAGA,QAAMe,gBAAgB,GAAIC,KAAD,IAEnB;AACJT,IAAAA,OAAO,CAACS,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAP;AACD,GAJD;;AAMA,QAAMC,iBAAiB,GAAIH,KAAD,IAEpB;AACJP,IAAAA,QAAQ,CAACO,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR;AACD,GAJD;;AAMA,QAAME,oBAAoB,GAAIJ,KAAD,IAEvB;AACJL,IAAAA,WAAW,CAACK,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX;AACD,GAJD;;AAMA,QAAMG,oBAAoB,GAAG,MAAM;AACjC5B,IAAAA,8BAA8B,CAACmB,IAAD,EAAOJ,KAAP,EAAcE,QAAd,CAA9B,CACGY,IADH,CACSC,cAAD,IAAoB;AACxB;AACA,YAAMC,IAAI,GAAGD,cAAc,CAACC,IAA5B;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,GAAjB;;AAEA,UAAI;AACF7B,QAAAA,MAAM,CAACD,GAAG,CAACE,EAAD,EAAK,OAAL,EAAcyB,IAAI,CAACG,GAAnB,CAAJ,EAA6B;AACjCrB,UAAAA,IAAI,EAAEA,IAD2B;AAEjCsB,UAAAA,IAAI,EAAE,CAF2B,CAExB;;AAFwB,SAA7B,CAAN,CAIGN,IAJH,CAISO,MAAD,IAAY;AAChBJ,UAAAA,OAAO,CAACC,GAAR,CAAYG,MAAZ;AACD,SANH,EAOGC,KAPH,CAOUC,GAAD,IAAS;AACdN,UAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACD,SATH;AAUD,OAXD,CAWE,OAAOC,CAAP,EAAU;AACVP,QAAAA,OAAO,CAACQ,KAAR,CAAc,yBAAd,EAAyCD,CAAzC;AACD;;AAEDnB,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACD,KAvBH,EAwBGiB,KAxBH,CAwBUG,KAAD,IAAW;AAChB9B,MAAAA,QAAQ,CAAC,IAAD,CAAR;;AACA,UAAI8B,KAAK,CAACC,IAAN,KAAe,2BAAnB,EAAgD;AAC9C7B,QAAAA,eAAe,CAAC,iBAAD,CAAf;AACD;;AAAC,UAAI4B,KAAK,CAACC,IAAN,KAAe,uBAAnB,EAA4C;AAC5C7B,QAAAA,eAAe,CAAC,uBAAD,CAAf;AACD;;AAAC,UAAIG,KAAK,KAAK,EAAd,EAAkB;AAClBH,QAAAA,eAAe,CAAC,YAAD,CAAf;AACD;;AAAC,UAAIC,IAAI,KAAK,EAAb,EAAiB;AACjBD,QAAAA,eAAe,CAAC,gBAAD,CAAf;AACD;;AAAC,UAAIK,QAAQ,KAAK,EAAjB,EAAqB;AACrBL,QAAAA,eAAe,CAAC,eAAD,CAAf;AACD,OAFC,MAEK;AACLA,QAAAA,eAAe,CAAC,YAAD,CAAf;AACD;;AACDoB,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAK,CAACC,IAAlB,EAfgB,CAgBhB;AACA;AACD,KA1CH;AA2CD,GA5CD;;AA8CA,sBACE;AAAA,cACGpB,OAAO,CAACqB,UAAR,gBACC,QAAC,QAAD;AAAU,MAAA,EAAE,EAAE;AAAd;AAAA;AAAA;AAAA;AAAA,YADD,gBAGC;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEGjC,KAAK,iBAAI,QAAC,KAAD;AAAO,QAAA,OAAO,EAAC,QAAf;AAAA,kBAAyBE;AAAzB;AAAA;AAAA;AAAA;AAAA,cAFZ,eAIE,QAAC,IAAD;AAAA,gCACE,QAAC,IAAD,CAAM,KAAN;AAAY,UAAA,SAAS,EAAC,MAAtB;AAA6B,UAAA,SAAS,EAAC,eAAvC;AAAA,kCACE,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD,CAAM,OAAN;AACE,YAAA,IAAI,EAAC,MADP;AAEE,YAAA,WAAW,EAAC,YAFd;AAGE,YAAA,KAAK,EAAEE,IAHT;AAIE,YAAA,QAAQ,EAAES;AAJZ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAWE,QAAC,IAAD,CAAM,KAAN;AAAY,UAAA,SAAS,EAAC,MAAtB;AAA6B,UAAA,SAAS,EAAC,gBAAvC;AAAA,kCACE,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD,CAAM,OAAN;AACE,YAAA,IAAI,EAAC,OADP;AAEE,YAAA,WAAW,EAAC,aAFd;AAGE,YAAA,KAAK,EAAEP,KAHT;AAIE,YAAA,QAAQ,EAAEW;AAJZ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF,eAqBE,QAAC,IAAD,CAAM,KAAN;AAAY,UAAA,SAAS,EAAC,MAAtB;AAA6B,UAAA,SAAS,EAAC,mBAAvC;AAAA,kCACE,QAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,IAAD,CAAM,OAAN;AACE,YAAA,IAAI,EAAC,UADP;AAEE,YAAA,WAAW,EAAC,UAFd;AAGE,YAAA,KAAK,EAAET,QAHT;AAIE,YAAA,QAAQ,EAAEU;AAJZ;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBArBF,eA8BE,QAAC,MAAD;AACE,UAAA,OAAO,EAAC,SADV;AAEE,UAAA,IAAI,EAAC,QAFP;AAGE,UAAA,OAAO,EAAEC,oBAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBA9BF,eAqCE;AAAA;AAAA;AAAA;AAAA,gBArCF,eAsCE;AAAA,iCACE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAE,QAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAtCF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAJJ,mBADF;AAuDD,CAlID;;GAAMpB,Y;UAOaL,W;;;KAPbK,Y;AAoIN,eAAeA,YAAf","sourcesContent":["import { useContext, useState } from \"react\";\nimport { Form, Button, Alert } from \"react-bootstrap\";\nimport { getAuth, createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { Link, Navigate, useNavigate } from \"react-router-dom\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { db } from \"../firebase\";\nimport { AuthContext } from \"../context/AuthContext\";\n\nconst RegisterPage = () => {\n  const [alert, setAlert] = useState(false);\n  const [alertMessage, setAlertMessage] = useState(\"\");\n  const [name, setName] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const auth = getAuth();\n  const navigate = useNavigate();\n  const context = useContext(AuthContext);\n\n\n  const handleChangeName = (event: {\n    target: { value: React.SetStateAction<string> };\n  }) => {\n    setName(event.target.value);\n  };\n\n  const handleChangeEmail = (event: {\n    target: { value: React.SetStateAction<string> };\n  }) => {\n    setEmail(event.target.value);\n  };\n\n  const handleChangePassword = (event: {\n    target: { value: React.SetStateAction<string> };\n  }) => {\n    setPassword(event.target.value);\n  };\n\n  const handleRegisterButton = () => {\n    createUserWithEmailAndPassword(auth, email, password)\n      .then((userCredential) => {\n        // Signed in\n        const user = userCredential.user;\n\n        console.log(user.uid);\n\n        try {\n          setDoc(doc(db, \"users\", user.uid), {\n            name: name,\n            role: 0, // 0: user, 1: admin\n          })\n            .then((result) => {\n              console.log(result);\n            })\n            .catch((err) => {\n              console.log(err);\n            });\n        } catch (e) {\n          console.error(\"Error adding document: \", e);\n        }\n\n        navigate(\"/login\");\n      })\n      .catch((error) => {\n        setAlert(true);\n        if (error.code === \"auth/email-already-in-use\") {\n          setAlertMessage(\"メールアドレスに不備があります\");\n        } if (error.code === \"auth/invalid-password\") {\n          setAlertMessage(\"パスワードは６文字以上でなくてはいけません\");\n        } if (email === \"\") {\n          setAlertMessage(\"Emailが空白です\");\n        } if (name === \"\") {\n          setAlertMessage(\"Your nameが空白です\");\n        } if (password === \"\") {\n          setAlertMessage(\"passwordが空白です\");\n        } else {\n          setAlertMessage(\"入力に不備があります\");\n        }\n        console.log(error.code)\n        // const errorCode = error.code;\n        // const errorMessage = error.message;\n      });\n  };\n\n  return (\n    <>\n      {context.isLoggedIn ? (\n        <Navigate to={\"/\"} />\n      ) : (\n        <>\n          <h1>新規登録</h1>\n          {alert && <Alert variant=\"danger\">{alertMessage}</Alert>}\n\n          <Form>\n            <Form.Group className=\"mb-3\" controlId=\"formBasicName\">\n              <Form.Label>Your name</Form.Label>\n              <Form.Control\n                type=\"text\"\n                placeholder=\"Enter name\"\n                value={name}\n                onChange={handleChangeName}\n              />\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\n              <Form.Label>Email address</Form.Label>\n              <Form.Control\n                type=\"email\"\n                placeholder=\"Enter email\"\n                value={email}\n                onChange={handleChangeEmail}\n              />\n            </Form.Group>\n\n            <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n              <Form.Label>Password</Form.Label>\n              <Form.Control\n                type=\"password\"\n                placeholder=\"Password\"\n                value={password}\n                onChange={handleChangePassword}\n              />\n            </Form.Group>\n            <Button\n              variant=\"primary\"\n              type=\"button\"\n              onClick={handleRegisterButton}\n            >\n              Submit\n            </Button>\n            <br></br>\n            <small>\n              <Link to={\"/login\"}>ログインはこちら</Link>\n            </small>\n          </Form>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default RegisterPage;\n"]},"metadata":{},"sourceType":"module"}